{% extends "base.html" %}
{% block content %}
<div class="header-row">
  <h1>Provider Profile</h1>
  <div>
    <a class="btn secondary" href="{{ url_for('provider_change_password') }}">Change Password</a>
    <a class="btn secondary" href="{{ url_for('provider_dashboard') }}">Back to Dashboard</a>
  </div>
</div>

<p class="muted">These details describe the service provider and appear across the site.</p>

<form method="post" class="form">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
  <label>Custom Profile Link (easy to share)
    <input name="custom_url" value="{{ form.get('custom_url','') }}" placeholder="e.g., taime-designs">
    <small style="color: var(--muted); font-size: 12px;">Choose a unique, easy-to-remember link for your public profile. Example: https://127.0.0.1:5000/u/taime-designs</small>
  </label>
  <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
    <div>
      <label>Profile Photo URL
        <input name="profile_photo" value="{{ form.get('profile_photo','') }}" placeholder="https://example.com/photo.jpg">
        <small style="color: var(--muted); font-size: 12px;">Enter a URL to your profile photo (optional)</small>
      </label>
    </div>
    <div style="text-align: center;">
      <div style="margin-bottom: 10px;"><strong>Photo Preview:</strong></div>
      {% if form.get('profile_photo') and form.get('profile_photo').strip() %}
        <img src="{{ form.get('profile_photo') }}" alt="Profile Preview" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; border: 2px solid var(--accent);">
      {% else %}
        <div style="width: 80px; height: 80px; border-radius: 50%; background: var(--accent); color: #000; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: bold; margin: 0 auto;">{{ (form.get('first_name') or form.get('business_name') or 'T')[0]|upper }}</div>
      {% endif %}
    </div>
  </div>
  
  <label>First name (shown on services)
    <input name="first_name" value="{{ form.get('first_name','') }}" placeholder="e.g., Taime">
  </label>
  <label>Company name
    <input name="business_name" value="{{ form.get('business_name','') }}" placeholder="Independent">
  </label>
  <label>Phone
    <input name="phone" value="{{ form.get('phone','') }}" placeholder="(555) 123-4567">
  </label>
  <label>Base ZIP (optional)
    <input name="base_zip" value="{{ form.get('base_zip','') }}" pattern="\d{5}" maxlength="5" placeholder="e.g., 30301">
  </label>
  <label>About (optional)
    <textarea name="about" rows="5" placeholder="A short description about the provider.">{{ form.get('about','') }}</textarea>
  </label>
  
  <div style="margin: 30px 0;">
    <h3 style="color: var(--accent); margin-bottom: 15px;">ðŸ“Œ Social Media & Online Presence</h3>
    <p style="color: var(--muted); font-size: 14px; margin-bottom: 20px;">Add your social media profiles and website to display as pins on your public profile</p>
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
      <label>LinkedIn Profile
        <input name="linkedin_url" value="{{ form.get('linkedin_url','') }}" placeholder="https://linkedin.com/in/yourprofile">
      </label>
      <label>Facebook Page
        <input name="facebook_url" value="{{ form.get('facebook_url','') }}" placeholder="https://facebook.com/yourpage">
      </label>
      <label>Instagram Profile
        <input name="instagram_url" value="{{ form.get('instagram_url','') }}" placeholder="https://instagram.com/yourprofile">
      </label>
      <label>Twitter Profile
        <input name="twitter_url" value="{{ form.get('twitter_url','') }}" placeholder="https://twitter.com/yourprofile">
      </label>
      <label>Website
        <input name="website_url" value="{{ form.get('website_url','') }}" placeholder="https://yourwebsite.com">
      </label>
      <label>YouTube Channel
        <input name="youtube_url" value="{{ form.get('youtube_url','') }}" placeholder="https://youtube.com/c/yourchannel">
      </label>
    </div>
  </div>
  
  <div class="form-actions">
    <a class="btn secondary" href="{{ url_for('provider_dashboard') }}">Cancel</a>
    <button class="btn" type="submit">Save Provider</button>
  </div>
</form>

<div class="stats" style="margin-top: 30px;">
  <div class="stat">
    <span class="num">{{ leads_count or 0 }}</span>
    <span class="label">Leads</span>
  </div>
  <div style="display:flex; gap:8px; align-items:center;">
    <a class="btn" href="{{ url_for('provider_leads') }}">View Leads</a>
    <a class="btn" href="{{ url_for('provider_leads_export_csv') }}">Export CSV</a>
  </div>
</div>
{% endblock %}
